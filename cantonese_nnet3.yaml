# You have to download TEDLIUM "online nnet2" models in order to use this sample
# Run download-tedlium-nnet2.sh in 'test/models' to download them.
use-nnet2: True
# decoder:
#     use-threaded-decoder:  true
#     model : /nfs/mobvoi/corpus/zh-hk/LDC2016S02/cfyeh_am_train/exp/chain/final.mdl
#     word-syms : /nfs/mobvoi/corpus/zh-hk/IARPA_BABEL_BP_101/lm_v0/my_expt/exp/chain/graph/words.txt
#     fst : /nfs/mobvoi/corpus/zh-hk/IARPA_BABEL_BP_101/lm_v0/my_expt/exp/chain/graph/HCLG.fst
#     max-active: 7000
#     min-active: 200
#     beam: 15.0
#     lattice-beam: 8.0
#     acoustic-scale: 1.0
#     nnet-mode: 3
#     add-pitch: true
#     feature-type: fbank
#     #fbank-config: /home/cfyeh/workspace/20170615.LDC2016S02/conf/fbank.conf
#     fbank-config: /home/yzhdong/sandbox/fbank.conf

decoder:
    use-threaded-decoder:  true
    #model : /home/cfyeh/workspace/20170727.Huiting.Cantonese/exp/chain_smbr/final.mdl
    model : /home/cfyeh/workspace/20170727.Huiting.Cantonese/exp_reverb/chain_smbr/final.mdl


    #word-syms : /nfs/mgsong/workspace/lm_v0/huiting_tg_ht/exp/chain/graph/words.txt
    #fst : /nfs/mgsong/workspace/lm_v0/huiting_tg_ht/exp/chain/graph/HCLG.fst
    
    #word-syms : /nfs/mgsong/workspace/lm_v2/huiting_tg_htv2/exp/chain/graph/words.txt
    #fst : /nfs/mgsong/workspace/lm_v2/huiting_tg_htv2/exp/chain/graph/HCLG.fst
    
    #May's version
    #word-syms : /nfs/mhwang/zh-hk/my_lm_train/3b/words.txt
    #fst : /nfs/mhwang/zh-hk/my_lm_train/3b/HCLG.fst

    word-syms : /home/yzhdong/mobvoi/zh-hk/lm/tmp/words.txt
    fst : /home/yzhdong/mobvoi/zh-hk/lm/tmp/HCLG.fst
    
    max-active: 7000
    min-active: 200
    beam: 15.0
    lattice-beam: 8.0
    acoustic-scale: 1.0
    nnet-mode: 3
    add-pitch: true
    feature-type: fbank
    fbank-config: /nfs/mobvoi/corpus/zh-hk/huiting_cantonese_1000h/my_am_train/conf/fbank.conf
    online-pitch-config: /nfs/mobvoi/corpus/zh-hk/huiting_cantonese_1000h/my_am_train/conf/pitch_online_l75r15.conf

out-dir: /home/yzhdong/data/cantonese

use-vad: False
silence-timeout: 10

# Just a sample post-processor that appends "." to the hypothesis
# post-processor: perl -npe 'BEGIN {use IO::Handle; STDOUT->autoflush(1);} s/(.*)/\1./;'

# A sample full post processor that add a confidence score to 1-best hyp and deletes other n-best hyps
full-post-processor: /home/yzhdong/mobvoi/kaldi-gstreamer-server/sample_full_post_processor.py

logging:
    version : 1
    disable_existing_loggers: False
    formatters:
        simpleFormater:
            format: '%(asctime)s - %(levelname)7s: %(name)10s: %(message)s'
            datefmt: '%Y-%m-%d %H:%M:%S'
    handlers:
        console:
            class: logging.StreamHandler
            formatter: simpleFormater
            level: DEBUG
    root:
        level: DEBUG
        handlers: [console]
